{% extends "layout.html" %}

{% block css %}
<style>
h1,h2,h3 {
    font-weight: normal;
}

pre::first-line {
    line-height: 0px;
}
</style>
{% endblock %}

{% block body %}
<div class="main-content">
    <h2>PassZero API v1</h2>

    <table id="method-table" class="table table-striped">
        <thead>
            <tr>
                <th>Method &amp; path</th>
                <th>Description</th>
                <th>Requires login</th>
                <th>Requires CSRF token</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><a href="#get_csrf_token">GET /api/v1/csrf_token</a></td>
                <td class="about">Get CSRF token for current user's session</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            <tr>
                <td><a href="#post_login">POST /api/v1/login</a></td>
                <td class="about">Login. On success, update session cookie.</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            <tr>
                <td><a href="#post_logout">POST /api/v1/logout</a></td>
                <td class="about">Destroy current session</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span><a href="#foot-1">[1]</a></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>

            <!-- everything dealing with entries -->
            <tr>
                <td><a href="#get_entries">GET /api/v1/entries</a></td>
                <td class="about">Retrieve all decrypted entries for the logged-in user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            <tr>
                <td><a href="#post_entries_new">POST /api/v1/entries/new</a></td>
                <td class="about">Create a new entry for the logged-in user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-ok"></span></td>
            </tr>
            <tr>
                <td><a href="#update_entries_id">UPDATE or POST /api/v1/entries/&lt;entry_id:int&gt;</a></td>
                <td class="about">Update the specified entry</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-ok"></span></td>
            </tr>
            <tr>
                <td><a href="#delete_entries_id">DELETE /api/v1/entries/&lt;entry_id:int&gt;</a></td>
                <td class="about">Delete the specified entry</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-ok"></span></td>
            </tr>
            <tr>
                <td><a href="#post_entries_nuclear">POST /api/v1/entries/nuclear</a></td>
                <td class="about">Delete <b>all</b> the entries for the logged-in user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-ok"></span></td>
            </tr>

            <!-- everything dealing with the user -->
            <tr>
                <td><a href="#post_user_signup">POST /api/v1/user/signup</a></td>
                <td class="about">First step of user registration.
        Create an inactive user and send an email to the specified email address.
        The account cannot be logged-into until it has been activated via the activation link in the email.</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            <tr>
                <td><a href="#post_user_activate">POST /api/v1/user/activate</a></td>
                <td class="about">Second and final step to register an account</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            
            <tr>
                <td><a href="#update_user_password">UPDATE or PUT /api/v1/user/password</a></td>
                <td class="about">Change the password for the logged-in user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-ok"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-ok"></span></td>
            </tr>
            <tr>
                <td><a href="#post_user_recover">POST /api/v1/user/recover</a></td>
                <td class="about">First step of account recovery for the specified user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
            <tr>
                <td><a href="#post_user_recover_confirm">POST /api/v1/user/recover/confirm</a></td>
                <td class="about">Second and final step of account recovery for the specified user</td>
                <td class="requires-login"><span class="glyphicon glyphicon-remove"></span></td>
                <td class="requires-csrf-token"><span class="glyphicon glyphicon-remove"></span></td>
            </tr>
        </tbody>
    </table>

    <div class="footnotes">
        <sup id="foot-1">[1] Although doesn't make too much sense when not logged in</sup>
    </div>

    {%- include "api_v1_docs/get_csrf_token.html" -%}
    {%- include "api_v1_docs/post_login.html" -%}
    {%- include "api_v1_docs/post_logout.html" -%}
    {%- include "api_v1_docs/get_entries.html" -%}
    {%- include "api_v1_docs/post_entries_new.html" -%}
    {%- include "api_v1_docs/update_entries_id.html" -%}
    {%- include "api_v1_docs/delete_entries_id.html" -%}
    {%- include "api_v1_docs/post_entries_nuclear.html" -%}
    {%- include "api_v1_docs/post_user_signup.html" -%}
    {%- include "api_v1_docs/post_user_activate.html" -%}
    {%- include "api_v1_docs/update_user_password.html" -%}
    {%- include "api_v1_docs/post_user_recover.html" -%}
    {%- include "api_v1_docs/post_user_recover_confirm.html" -%}
</div>
{% endblock %}
