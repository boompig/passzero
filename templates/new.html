{% extends "layout.html" %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for("static", filename="css/new.css") }}" />
{% endblock %}

{% block js %}
    <script src="{{ url_for("static", filename="js/new.js") }}"></script>
{% endblock %}

{% block body %}
    {% if entry %}
        <form method="POST" action="/entries/{{ e_id }}" role="form"
            onsubmit="makeEdit(event)">
    {% else %}
        <form method="POST" action="{{ url_for('new_entry_api') }}" role="form"
            onsubmit="createNew(event)">
    {% endif %}
        <h3 class="title">
            {%- if entry -%}
                Edit PassZero entry for {{ entry["account"] }}
            {%- else -%}
                Create new PassZero entry
            {%- endif -%}
        </h3>

        <label for="account">Account</label>
        <input type="text" name="account" required="true" class="form-control"
            value="{{ (entry["account"] if entry) }}" />

        <label for="username">Username</label>
        <input type="text" name="username" autocomplete="off" required="true" 
            class="form-control" value="{{ (entry["username"] if entry) }}"/>

        <label for="password">Password</label>
        <input type="password" name="password" id="password" autocomplete="off" 
            required="true" class="form-control" value="{{ (entry["password"] if entry) }}" />

        <button type="button" class="btn btn-info"
            id="show-hide-btn" onclick="showHidePassword(event)">Show</button>
        <button type="button" class="btn btn-info" id="gen-pass-btn"
            onclick="genPassword()">Random Password</button>

        <div id="len-container">
            <span id="pass-len-text" class="text">Length</span>
            <button type="button" class="glyphicon glyphicon-minus"
                aria-hidden="true" onclick="changeLen(-1)"></button>
            <span id="passLen" class="text">12</span>
            <button type="button" class="glyphicon glyphicon-plus"
                aria-hidden="true" onclick="changeLen(+1)"></button>
        </div>

        <button type="submit" class="btn btn-success form-control" 
            id="create-btn">{{ ("Save" if entry else "Create" ) }}</button>
    </form>
{% endblock %}
